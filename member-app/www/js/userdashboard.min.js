function hexToRgb(e){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null}$(document).ready(function(){function w(e,a){var t=e/100*360*Math.PI/180;o.save(),o.beginPath(),o.moveTo(l,r),o.arc(l,r,n,y,y+t,!1),o.closePath(),o.fillStyle=a,o.fill(),o.restore(),y+=t}function D(e,a,t,i,s){console.log(e.length),console.log(a.length),console.log(s),XBox=230;for(var g=15,f=0;f<e.length;f++){var m=n-g/2;midAngle=c+C(e[f]/s*100,s);var u=l+m*Math.cos(midAngle),v=r+m*Math.sin(midAngle);console.log("Mid Angles : "+midAngle),1>midAngle&&(u=230),midAngle>=1&&(u=30),w(e[f]/s*100,a[f]),e[f]>0&&S(t[f],i[f],a[f],e[f],u,v)}o.beginPath(),o.moveTo(l,r),o.fillStyle=T,o.arc(l,r,.8*n,0,2*Math.PI,!1),o.fill()}function S(e,a,t,l,r,n){o.font="10px Arial",o.fillStyle="#b6b6b6",o.fillText(e,r,n+8),o.fillText(a,r,n+8+10),o.beginPath(),o.lineWidth=3,o.strokeStyle=t,o.lineCap="round",o.moveTo(r+35,n),o.lineTo(r+35,n+20),o.stroke(),o.font="bold 14px Arial",o.fillStyle="grey",percentSeg=l,labelSeg=100==percentSeg?"OK":percentSeg+"",o.fillText(labelSeg,r+40,n+5+10)}function x(){var e=t.width/2,a=t.height/2;o.beginPath(),o.arc(e,a,25,0,2*Math.PI),o.strokeStyle="rgba(100,100,100,.5)",o.stroke(),o.fillStyle="rgb(84,188,0)",o.fill();var l="22pt Arial",r=M+"";o.fillStyle="white",o.textAlign="left",o.textBaseline="top",o.font=l;var n=o.measureText(r).width,i=25;o.fillText(r,e-n/2,a-(i-7))}function I(){var e=Array(),a=domain+"mobile-member/get_report_set.php";$.ajax({url:a,dataType:"json",async:!1,success:function(a){e=a.items,console.log("**** RepData: *****"),console.log("Rep Data : "+e),console.log("*******************")},error:function(e,a,t){alert(e.status),alert(t)}});var t=0,o=Array(),a=domain+"mobile-member/get_report_numbers.php?User="+user;console.log("url = "+a),$.ajax({url:a,dataType:"json",async:!1,success:function(e){o=e.items},error:function(e,a,t){alert(e.status),alert(t)}});var l=0;for(console.log("**** RepNumbers: *****"),console.log(o),console.log("*******************");9>l;)u[l]=o[l].number,b[l]=e[l].title.substring(0,4),m[l]=e[l].color,p[l]=e[l].abrev,t+=parseInt(u[l]),l++;return console.log("Total Rep : "+t),D(u,m,b,p,t),t}function P(e){var a=0,t=domain+"mobile-member/getSummaryData.php?User="+e;$.ajax({url:t,dataType:"json",async:!1,success:function(e){ConnData=e.items,a=ConnData[0].Data,PastDx=ConnData[1].Data,Medications=ConnData[2].Data,Immuno=ConnData[3].Data,Family=ConnData[4].Data,Habits=ConnData[5].Data,Allergies=ConnData[6].Data,console.log("Admin Data : "+a),console.log("PastDX : "+PastDx),console.log("Medications : "+Medications),console.log("Immuno: "+Immuno),console.log("Family: "+Family),console.log("Habits: "+Habits),console.log("Allergies: "+Allergies)}})}function C(e,a){var t=e*Math.PI*2/a;return parseFloat(t)}$("#clicker").click(function(){alert("Handler for .click() called.")}),console.log("now to load some donuts!");var e=localStorage.getItem("mydata");if(null!=e){var a=JSON.parse(e);domain=a.domain,user=a.user}console.log("getting here before"),P(user),console.log("getting here after");var t=document.getElementById("canvas"),o=t.getContext("2d"),l=Math.floor(t.width/2),r=Math.floor(t.height/2),n=.8*Math.min(l,r),c=(t.width/2,t.height/2,0-Math.PI/2),m=new Array,u=new Array,b=(new Array,new Array,new Array,new Array),p=new Array,y=0,T=o.createLinearGradient(0,0,t.width,0);T.addColorStop(0,"#Fbfbfb"),T.addColorStop(.75,"#Fbfbfb"),o.fillStyle=T,o.fillRect(0,0,t.width,t.height);var M=I();x(),$("#canvas").click(function(){window.location.href="records.html"}),$("h2m_button").on({mouseover:function(){$(this).attr("src","http://media02.hongkiat.com/css3-code-slim/css3-markup.jpg")},mouseout:function(){$(this).attr("src","http://www.w3.org/html/logo/downloads/HTML5_Logo_512.png")}})});