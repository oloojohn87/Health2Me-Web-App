<?php
session_start();
 require("environment_detail.php");
 $dbhost = $env_var_db['dbhost'];
 $dbname = $env_var_db['dbname'];
 $dbuser = $env_var_db['dbuser'];
 $dbpass = $env_var_db['dbpass'];

 $link = mysql_connect("$dbhost", "$dbuser", "$dbpass")or die("cannot connect");
 mysql_select_db("$dbname")or die("cannot select DB");

?>
<!DOCTYPE html>
<html lang="en" style="background: #F9F9F9;"><head>
    <meta charset="utf-8">
    <title>Inmers - Center Management Console</title>
    <link rel="icon" type="image/ico" href="favicon.ico"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="css/jquery-ui-1.8.16.custom.css" media="screen"  />
    <link rel="stylesheet" href="css/fullcalendar.css" media="screen"  />
    <link rel="stylesheet" href="css/chosen.css" media="screen"  />
    <link rel="stylesheet" href="css/datepicker.css" >
    <link rel="stylesheet" href="css/colorpicker.css">
    <link rel="stylesheet" href="css/glisse.css?1.css">
    <link rel="stylesheet" href="css/jquery.jgrowl.css">
    <link rel="stylesheet" href="js/elfinder/css/elfinder.css" media="screen" />
    <link rel="stylesheet" href="css/jquery.tagsinput.css" />
    <link rel="stylesheet" href="css/demo_table.css" >
    <link rel="stylesheet" href="css/jquery.jscrollpane.css" >
    <link rel="stylesheet" href="css/validationEngine.jquery.css">
    <link rel="stylesheet" href="css/jquery.stepy.css" />
    <link rel="stylesheet" type="text/css" href="css/googleAPIFamilyCabin.css">
      <script type="text/javascript" src="js/42b6r0yr5470"></script>
	<link rel="stylesheet" href="css/icon/font-awesome.css">
 <!--   <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="css/bootstrap-responsive.css">
	<link rel="stylesheet" href="css/toggle-switch.css">
	
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/excanvas.min.js"></script><![endif]-->
 
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/images/icons/favicon.ico">
    	<style>
		.ui-progressbar {
		position: relative;
		}
		.progress-label {
		position: absolute;
		left: 50%;
		top: 4px;
		font-weight: bold;
		text-shadow: 1px 1px 0 #fff;
		}
	</style>
	<style>
	#overlay {
	  background-color: none;
	  position: auto;
	  top: 0; right: 0; bottom: 0; left: 0;
	  opacity: 1.0; /* also -moz-opacity, etc. */
	  
    }
	#messagecontent {
	  white-space: pre-wrap;   
	}
	</style>
    <style>
    #progressbar .ui-progressbar-value {
    background-color: #ccc;
    }
    </style>
    <style>
        .segmented_control{
            width: 100px;
            height: 35px;
            background-color: #FBFBFB;
            color: #222;
            border: 1px solid #E6E6E6;
            outline: 0px;
            float: left;
            cursor: pointer;
        }
        .segmented_control_selected{
            width: 100px;
            height: 35px;
            background-color: #22AEFF;
            color: #FFF;
            border: 0px solid #E6E6E6;
            outline: 0px;
            float: left;
            cursor: default;
        }
    </style>

  <body style="background: #F9F9F9;">
      <!--Header Start-->
	<div class="header" >
  		
           <a href="index.html" class="logo"><h1>Health2me</h1></a>
           
           <div class="pull-right">
           
            
           <!--Button User Start-->
		   <div class="btn-group pull-right" >

            <div class="dropdown-menu" id="prof_dropdown">
            <div class="item_m"><span class="caret"></span></div>
            <ul class="clear_ul" >
			<li>
			<i class="icon-globe"></i> Home</a></li>
              
              <li><a href="medicalConfiguration.php"><i class="icon-cog"></i> Settings</a></li>
              <li><a href="logout.php"><i class="icon-off"></i> Sign Out</a></li>
            </ul>
            </div>
          </div>
          <!--Button User END-->  
          
          </div>
    </div>
    <!--Header END-->
    <div id="content" style="background: #F9F9F9; padding-left:0px;">
    
    	    
	 <!--SpeedBar Start--->
     <div class="speedbar">
     <div class="speedbar-content">
     <ul class="menu-speedbar">

     </ul>

     
     </div>
     </div>
     <!--SpeedBar END-->
     
     
        <div id="notesModal" style="width: 600px; height: 800px; padding: 0px; display: none;"></div>
        <div id="summaryModal" style="width: 680px; height: 800px; padding: 0px; display: none;"></div>
        <div id="recordingModal" style="width: 400px; height: 400px; padding: 0px; display: none;"></div>
     <!--CONTENT MAIN START-->
        <div class="content">
            <div class="grid" class="grid span4" style="width:1000px; height:1600px; margin: 0 auto; margin-top:30px; padding-top:30px;">
                
                <!-- ADD STUFF HERE -->
                <h3 style="text-align: center;">PDMST Dashboard</h3>
                <div style="width: 400px; height: 170px; float: right; margin-right: 40px; margin-top: 30px;">
                    <div style="width: 200px; height: 100px; float: left;">
                        <h4 style="color: #8A8A8A; text-align: center; font-size: 32px;">Consultations</h4>
                        <p id="number_of_consultations" style="color: #22AEFF; font-size: 42px; font-weight: bold; text-align: center; margin-top: 25px;"></p>
                    </div>
                    <div style="width: 200px; height: 100px; float: left;">
                        <h4 style="color: #8A8A8A; text-align: center; font-size: 32px;">Users</h4>
                        <p id="number_of_users" style="color: #5EB529; font-size: 42px; font-weight: bold; text-align: center; margin-top: 25px;"></p>
                    </div>
                    <div style="width: 200px; height: 35px; margin-top: 25px; float: right; margin-right: 20px;">
                        <button id="toggle_1" class="segmented_control_selected" style="border-top-left-radius: 5px; border-bottom-left-radius: 5px;">Actual</button>
                        <button id="toggle_2" class="segmented_control" style="border-top-right-radius: 5px; border-bottom-right-radius: 5px;">Cumulative</button>
                    </div>
                </div>
                <div style="width: 500px; height: 100px; margin-left: 40px; margin-top: 30px;">
                    <div style="width: 500px; height: 50px;">
                        <label style="margin-right: 30px; float: left; margin-top: 5px;">Scope: </label>
                        <select id="scope_select" style="float: left;">
                            <option value="Global" selected>Global</option>
                            <?php 
                                $res = mysql_query("SELECT DISTINCT contract FROM consults");
                                while($row = mysql_fetch_assoc($res))
                                {
                                    if(strlen($row['contract']) > 0)
                                    {
                                        echo '<option value="'.$row['contract'].'">'.$row['contract'].'</option>';
                                    }
                                }
                            ?>
                        </select>
                    </div>
                    <div style="width: 500px; height: 50px;">
                        <label style="margin-right: 30px; float: left; margin-top: 5px;">Period: </label>
                        <select id="period_select" style="float: left;">
                            <option value="1" selected>Today</option>
                            <option value="2">This Week</option>
                            <option value="3">This Month</option>
                            <option value="4">This Year</option>
                        </select>
                    </div>
                </div>
                <div style="width: 210px; height: 30px; margin-left: 75px; margin-top: 45px; margin-bottom: -35px;">
                    <style>
                        .consultations_button{
                            width: 100px;
                            height: 30px;
                            background-color: #FBFBFB;
                            color: #222;
                            border: 1px solid #E6E6E6;
                            outline: 0px;
                            float: left;
                            cursor: pointer;
                            border-radius: 5px;
                        }
                        .consultations_button_selected{
                            width: 100px;
                            height: 30px;
                            background-color: #22AEFF;
                            color: #FFF;
                            border: 0px solid #E6E6E6;
                            outline: 0px;
                            float: left;
                            cursor: pointer;
                            border-radius: 5px;
                        }
                        .users_button{
                            width: 100px;
                            height: 30px;
                            background-color: #FBFBFB;
                            color: #222;
                            border: 1px solid #E6E6E6;
                            outline: 0px;
                            float: right;
                            cursor: pointer;
                            border-radius: 5px;
                        }
                        .users_button_selected{
                            width: 100px;
                            height: 30px;
                            background-color: #5EB529;
                            color: #FFF;
                            border: 0px solid #E6E6E6;
                            outline: 0px;
                            float: right;
                            cursor: pointer;
                            border-radius: 5px;
                        }
                    </style>
                    <button class="consultations_button_selected">Consultations</button>
                    <button class="users_button_selected">Users</button>
                </div>
                <div style="width: 900px; height: 300px; margin-left: 40px; margin-top: 30px;">
                    <canvas id="day_chart" width="900" height="300"></canvas>
                    <canvas id="week_chart" width="900" height="300" style="display: none;"></canvas>
                    <canvas id="month_chart" width="900" height="300" style="display: none;"></canvas>
                    <canvas id="year_chart" width="900" height="300" style="display: none;"></canvas>
                </div>
                <div id="chart_loader" style="width: 52px; height: 42px; margin-left: auto; margin-right: auto; margin-top: -170px; margin-bottom: 208px; display: none;">
                    <img src="images/load/29.gif"  alt="">
                </div>
                <style>
                    .search_bar_button{
                        width: 70px;
                        height: 30px;
                        background-color: #F6F6F6;
                        outline: 0px;
                        border: 1px solid #E7E7E7;
                        color: #3A3A3A;
                        border-top-right-radius: 5px;
                        border-bottom-right-radius: 5px;
                    }
                </style>
                <div class="controls" style="float: right; width: 500px; margin-right: 50px; margin-top: 80px;">
                    <input placeholder="name or surname or email" class="span7" id="search_bar" style="float: left; width: 420px; border-top-right-radius: 0px; border-bottom-right-radius: 0px;" size="16" type="text">
                    <button id="search_bar_clear_button" style="height: 18px; width: 18px; border-radius: 15px; border: 0px solid #FFF; outline: 0px; background-color: #E6E6E6; color: #FFF; font-size: 10px; padding: 0px; margin-top: 6px; margin-left: -105px; visibility: hidden;">X</button>
                    <button class="search_bar_button" style="float: left; width: 80px;" id="search_bar_button" lang="en">Search</button>
                </div>
                <div style="width: 300px; height: 35px; margin-left: 50px; margin-top: 80px;">
                    <button id="segment_1" class="segmented_control_selected" style="border-top-left-radius: 5px; border-bottom-left-radius: 5px;">Customers</button>
                    <button id="segment_2" class="segmented_control">Consultations</button>
                    <button id="segment_3" class="segmented_control" style="border-top-right-radius: 5px; border-bottom-right-radius: 5px;">Doctors</button>
                </div>
                <div id="customers_table" style="width: 900px; margin: auto; margin-top: 15px;">
                    <table>
                        <tr>
                            <th style="background-color: #6ECCFF; width: 225px; height: 25px;">
                                Name
                                <button id="caret_button_customers_Surname,Name" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <th style="background-color: #22AEFF; width: 225px; height: 25px;">
                                Calls
                                <button id="caret_button_customers_numberOfPhoneCalls" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <!--<th style="background-color: #22AEFF; width: 180px; height: 25px;">
                                Video Conferences
                                <button id="caret_button_customers_videoconferences" class="icon-caret-down" style="margin-left: 7px; border: 0px solid #FFF; background-color: inherit; outline: 0px;"></button>
                            </th>-->
                            <th style="background-color: #22AEFF; width: 225px; height: 25px;">
                                Sign Up Date
                                <button id="caret_button_customers_SignUpDate" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <th style="background-color: #22AEFF; width: 225px; height: 25px;">
                                Plan
                                <button id="caret_button_customers_typeOfPlan" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                        </tr>
                    </table>
                </div>
                <div id="consultations_table" style="width: 900px; margin: auto; margin-top: 15px; display: none;">
                    <table>
                        <tr>
                            <th style="background-color: #22AEFF; width: 155px; height: 25px;">
                                Doctor
                                <button id="caret_button_consultations_doctorSurname,doctorName" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <th style="background-color: #22AEFF; width: 155px; height: 25px;">
                                Patient
                                <button id="caret_button_consultations_patientSurname,patientName" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <th style="background-color: #22AEFF; width: 180px; height: 25px;">
                                Time
                                <button id="caret_button_consultations_DateTime" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <th style="background-color: #22AEFF; width: 50px; height: 25px;">
                                Type
                                <button id="caret_button_consultations_Type" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <th style="background-color: #22AEFF; width: 50px; height: 25px;">
                                Length
                                <button id="caret_button_consultations_Length" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <th style="background-color: #22AEFF; width: 100px; height: 25px;">
                                Status
                                <button id="caret_button_consultations_Status" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <th style="background-color: #22AEFF; width: 70px; height: 25px;">
                                Notes
                                <!--<button id="caret_button_consultations_Data_File" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px; "></button>-->
                            </th>
                            <th style="background-color: #22AEFF; width: 70px; height: 25px;">
                                Summ.
                                <!--<button id="caret_button_consultations_Summary_PDF" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>-->
                            </th>
                            <th style="background-color: #22AEFF; width: 70px; height: 25px;">
                                Rec.
                                <!--<button id="caret_button_consultations_Recorded_File" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>-->
                            </th>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 40px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 40px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 40px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 40px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 40px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 40px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 40px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 40px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 40px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 40px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 40px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 40px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 130px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 40px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 40px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 40px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 130px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 40px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 40px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 40px; height: 15px;"></td>
                        </tr>
                    </table>
                </div>
                <div id="doctors_table" style="width: 900px; margin: auto; margin-top: 15px; display: none;">
                    <table>
                        <tr>
                            <th style="background-color: #22AEFF; width: 225px; height: 25px;">
                                Name
                                <button id="caret_button_doctors_name" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <th style="background-color: #22AEFF; width: 225px; height: 25px;">
                                Calls
                                <button id="caret_button_doctors_calls" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <!--<th style="background-color: #22AEFF; width: 180px; height: 25px;">
                                Video Conferences
                                <button id="caret_button_doctors_cideoconferences" class="icon-caret-down" style="margin-left: 7px; border: 0px solid #FFF; background-color: inherit; outline: 0px;"></button>
                            </th>-->
                            <th style="background-color: #22AEFF; width: 225px; height: 25px;">
                                Patients
                                <button id="caret_button_doctors_numberOfConsultedPatients" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                            <!--<th style="background-color: #22AEFF; width: 150px; height: 25px;">
                                Summaries Edited
                                <button id="caret_button_doctors_summaries" class="icon-caret-down" style="margin-left: 7px; border: 0px solid #FFF; background-color: inherit; outline: 0px;"></button>
                            </th>-->
                            <th style="background-color: #22AEFF; width: 225px; height: 25px;">
                                PDFs Created
                                <button id="caret_button_doctors_reportsCreated" class="icon-caret-down" style="margin-left: -2px; border: 0px solid #FFF; background-color: inherit; outline: 0px; padding: 0px;"></button>
                            </th>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                            <td style="background-color: #F5F5F5; width: 225px; height: 15px;"></td>
                        </tr>
                        <tr>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                            <td style="background-color: #E9E9E9; width: 225px; height: 15px;"></td>
                        </tr>
                    </table>
                    
                    
                </div>
                <div id="table_loader" style="width: 220px; height: 19px; margin-left: auto; margin-right: auto; margin-top: 40px; margin-bottom: 40px; display: none;">
                    <img src="images/load/8.gif"  alt="">
                </div>
                <div style="width: 120px; height: 50px; margin-top: 25px; margin-left: auto; margin-right: auto;">
                    <style>
                        .page_button{
                            width: 30px; 
                            height: 30px; 
                            border-radius: 20px; 
                            outline: 0px; 
                            background-color: #22AEFF; 
                            color: #FFF; 
                            border: 0px solid #FFF; 
                            float: left;
                        }
                        .page_button:disabled{
                            background-color: #6ECCFF;
                            cursor: default;
                        }
                    </style>
                    
                    <button id="page_button_left" class="page_button" disabled>
                        <i class="icon-arrow-left"></i>
                    </button>
                    <div id="page_label" style="width: 60px; height: 30px; float: left; margin-top: 5px; text-align: center;">
                        1 of 1
                    </div>
                    <button id="page_button_right" class="page_button" disabled>
                        <i class="icon-arrow-right"></i>
                    </button>
                    
                </div>
            </div>
        </div>
    </div>
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/Chart.min.js"></script>
    <script>
        $(document).ready(function(){
            var day_consultations_data = 
                {
                    label: "Consultations",
                    fillColor: "rgba(220,220,220,0.2)",
                    strokeColor: "#22AEFF",
                    pointColor: "#22AEFF",
                    pointStrokeColor: "#22AEFF",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(220,220,220,1)",
                    data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                };
            var day_users_data = 
                {
                    label: "Users",
                    fillColor: "rgba(151,187,205,0.2)",
                    strokeColor: "#5EB529",
                    pointColor: "#5EB529",
                    pointStrokeColor: "#5EB529",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(151,187,205,1)",
                    data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                };
            var day_consultations_data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var day_users_data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var day_chart_data = {
                labels: ["12:00 AM", "1:00 AM", "2:00 AM", "3:00 AM", "4:00 AM", "5:00 AM", "6:00 AM", "7:00 AM", "8:00 AM", "9:00 AM", "10:00 AM", "11:00 AM", "12:00 PM", "1:00 PM", "2:00 PM", "3:00 PM", "4:00 PM", "5:00 PM", "6:00 PM", "7:00 PM", "8:00 PM", "9:00 PM", "10:00 PM", "11:00 PM"],
                datasets: [
                    {
                        label: "Consultations",
                        fillColor: "rgba(220,220,220,0.2)",
                        strokeColor: "#22AEFF",
                        pointColor: "#22AEFF",
                        pointStrokeColor: "#22AEFF",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(220,220,220,1)",
                        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    },
                    {
                        label: "Users",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "#5EB529",
                        pointColor: "#5EB529",
                        pointStrokeColor: "#5EB529",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    }
                ]
            };
            var week_consultations_data = [0, 0, 0, 0, 0, 0, 0];
            var week_users_data = [0, 0, 0, 0, 0, 0, 0];
            var week_chart_data = {
                labels: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
                datasets: [
                    {
                        label: "Consultations",
                        fillColor: "rgba(220,220,220,0.2)",
                        strokeColor: "#22AEFF",
                        pointColor: "#22AEFF",
                        pointStrokeColor: "#22AEFF",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(220,220,220,1)",
                        data: [0, 0, 0, 0, 0, 0, 0]
                    },
                    {
                        label: "Users",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "#5EB529",
                        pointColor: "#5EB529",
                        pointStrokeColor: "#5EB529",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: [0, 0, 0, 0, 0, 0, 0]
                    }
                ]
            };
            var month_consultations_data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var month_users_data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var month_chart_data = {
                labels: ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "30", "31"],
                datasets: [
                    {
                        label: "Consultations",
                        fillColor: "rgba(220,220,220,0.2)",
                        strokeColor: "#22AEFF",
                        pointColor: "#22AEFF",
                        pointStrokeColor: "#22AEFF",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(220,220,220,1)",
                        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    },
                    {
                        label: "Users",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "#5EB529",
                        pointColor: "#5EB529",
                        pointStrokeColor: "#5EB529",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    }
                ]
            };
            var year_consultations_data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var year_users_data = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var year_chart_data = {
                labels: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                datasets: [
                    {
                        label: "Consultations",
                        fillColor: "rgba(220,220,220,0.2)",
                        strokeColor: "#22AEFF",
                        pointColor: "#22AEFF",
                        pointStrokeColor: "#22AEFF",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(220,220,220,1)",
                        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    },
                    {
                        label: "Users",
                        fillColor: "rgba(151,187,205,0.2)",
                        strokeColor: "#5EB529",
                        pointColor: "#5EB529",
                        pointStrokeColor: "#5EB529",
                        pointHighlightFill: "#fff",
                        pointHighlightStroke: "rgba(151,187,205,1)",
                        data: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                    }
                ]
            };
            var day_ctx = $("#day_chart").get(0).getContext("2d");
            var Day_Chart = new Chart(day_ctx).Line(day_chart_data, {bezierCurve: false, responsive: true});
            var week_ctx = $("#week_chart").get(0).getContext("2d");
            var Week_Chart = new Chart(week_ctx).Line(week_chart_data, {bezierCurve: false});
            var month_ctx = $("#month_chart").get(0).getContext("2d");
            var Month_Chart = new Chart(month_ctx).Line(month_chart_data, {bezierCurve: false});
            var year_ctx = $("#year_chart").get(0).getContext("2d");
            var Year_Chart = new Chart(year_ctx).Line(year_chart_data, {bezierCurve: false});
            var user_values = [{}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}, {}];
            var current_table = 1;
            var current_column = 'Surname,Name';
            var ascending = true;
            var current_page = 1;
            var data_type = 1;
            var show_consultations = true;
            var show_users = true;
            
            function reload_chart(chart)
            {
                if(chart == 1) // today
                {
                    //Day_Chart.clear();
                    if(show_users)
                    {
                        for(var k = 0; k < Day_Chart.datasets[1].points.length; k++)
                        {
                            Day_Chart.datasets[1].points[k].value = day_users_data[k];
                        }
                    }
                    else
                    {
                        for(var k = 0; k < Day_Chart.datasets[1].points.length; k++)
                        {
                            Day_Chart.datasets[1].points[k].value = 0;
                        }
                    }
                    if(show_consultations)
                    {
                        for(var k = 0; k < Day_Chart.datasets[0].points.length; k++)
                        {
                            Day_Chart.datasets[0].points[k].value = day_consultations_data[k];
                        }
                    }
                    else
                    {
                        for(var k = 0; k < Day_Chart.datasets[0].points.length; k++)
                        {
                            Day_Chart.datasets[0].points[k].value = 0;
                        }
                    }
                    Day_Chart.update();
                    $("#day_chart").css("display", "block");
                }
                else if(chart == 2) // this week
                {
                    Week_Chart.clear();
                    if(show_users)
                    {
                        for(var k = 0; k < Week_Chart.datasets[1].points.length; k++)
                        {
                            Week_Chart.datasets[1].points[k].value = week_users_data[k];
                        }
                    }
                    else
                    {
                        for(var k = 0; k < Week_Chart.datasets[1].points.length; k++)
                        {
                            Week_Chart.datasets[1].points[k].value = 0;
                        }
                    }
                    if(show_consultations)
                    {
                        for(var k = 0; k < Week_Chart.datasets[0].points.length; k++)
                        {
                            Week_Chart.datasets[0].points[k].value = week_consultations_data[k];
                        }
                    }
                    else
                    {
                        for(var k = 0; k < Week_Chart.datasets[0].points.length; k++)
                        {
                            Week_Chart.datasets[0].points[k].value = 0;
                        }
                    }
                    Week_Chart.update();
                    $("#week_chart").css("display", "block");
                }
                else if(chart == 3) // this month
                {
                    Month_Chart.clear();
                    if(show_users)
                    {
                        for(var k = 0; k < Month_Chart.datasets[1].points.length; k++)
                        {
                            Month_Chart.datasets[1].points[k].value = month_users_data[k];
                        }
                    }
                    else
                    {
                        for(var k = 0; k < Month_Chart.datasets[1].points.length; k++)
                        {
                            Month_Chart.datasets[1].points[k].value = 0;
                        }
                    }
                    if(show_consultations)
                    {
                        for(var k = 0; k < Month_Chart.datasets[0].points.length; k++)
                        {
                            Month_Chart.datasets[0].points[k].value = month_consultations_data[k];
                        }
                    }
                    else
                    {
                        for(var k = 0; k < Month_Chart.datasets[0].points.length; k++)
                        {
                            Month_Chart.datasets[0].points[k].value = 0;
                        }
                    }
                    Month_Chart.update();
                    $("#month_chart").css("display", "block");
                }
                else if(chart == 4) // this year
                {
                    Year_Chart.clear();
                    if(show_users)
                    {
                        for(var k = 0; k < Year_Chart.datasets[1].points.length; k++)
                        {
                            Year_Chart.datasets[1].points[k].value = year_users_data[k];
                        }
                    }
                    else
                    {
                        for(var k = 0; k < Year_Chart.datasets[1].points.length; k++)
                        {
                            Year_Chart.datasets[1].points[k].value = 0;
                        }
                    }
                    if(show_consultations)
                    {
                        for(var k = 0; k < Year_Chart.datasets[0].points.length; k++)
                        {
                            Year_Chart.datasets[0].points[k].value = year_consultations_data[k];
                        }
                    }
                    else
                    {
                        for(var k = 0; k < Year_Chart.datasets[0].points.length; k++)
                        {
                            Year_Chart.datasets[0].points[k].value = 0;
                        }
                    }
                    Year_Chart.update();
                    $("#year_chart").css("display", "block");
                }
            }
            
            // this function gets data then loads the charts and the users / consultations numbers on top depending on scope and period
            function get_main_data(scope, period)
            {
                
                for(var i = 0; i < 31; i++)
                {
                    user_values[i] = {};
                }
                $("#day_chart").css("display", "none");
                $("#week_chart").css("display", "none");
                $("#month_chart").css("display", "none");
                $("#year_chart").css("display", "none");
                $("#chart_loader").css("display", "block");
                $.post("getConsultationsAndUsersData.php", {period: period, scope: scope}, function(data, status)
                {
                    console.log(data);
                    var d = JSON.parse(data);
                    $("#chart_loader").css("display", "none");
                    var consultations = d["consultations"];
                    var users = d["users"];
                    var num_consultations = 0;
                    var num_users = d["numUsers"];
                    if(period == 1) // today
                    {
                        Day_Chart.clear();
                        var cumulative = 0;
                        for(var k = 0; k < Day_Chart.datasets[1].points.length; k++)
                        {
                            if(k < users.length)
                            {
                                if(data_type == 2)
                                {
                                    cumulative += users[k];
                                    day_users_data[k] = cumulative;
                                }
                                else
                                {
                                    
                                    day_users_data[k] = users[k];
                                }
                            }
                            else
                            {
                                if(data_type == 2)
                                {
                                    day_users_data[k] = cumulative;
                                }
                                else
                                {
                                    day_users_data[k] = 0;
                                }
                            }
                        }
                        cumulative = 0;
                        for(var k = 0; k < Day_Chart.datasets[0].points.length; k++)
                        {
                            if(k < consultations.length)
                            {
                                if(data_type == 2)
                                {
                                    cumulative += consultations[k];
                                    day_consultations_data[k] = cumulative;
                                }
                                else
                                {
                                    
                                    day_consultations_data[k] = consultations[k];
                                }
                                num_consultations += consultations[k];
                            }
                            else
                            {
                                if(data_type == 2)
                                {
                                    day_consultations_data[k] = cumulative;
                                }
                                else
                                {
                                    day_consultations_data[k] = 0;
                                }
                            }
                        }
                        reload_chart(1);
                        $("#day_chart").css("display", "block");
                    }
                    else if(period == 2) // this week
                    {
                        Week_Chart.clear();
                        var cumulative = 0;
                        for(var k = 0; k < Week_Chart.datasets[1].points.length; k++)
                        {
                            if(k < users.length)
                            {
                                if(data_type == 2)
                                {
                                    cumulative += users[k];
                                    week_users_data[k] = cumulative;
                                }
                                else
                                {
                                    
                                    week_users_data[k] = users[k];
                                }
                            }
                            else
                            {
                                if(data_type == 2)
                                {
                                    week_users_data[k] = cumulative;
                                }
                                else
                                {
                                    week_users_data[k] = 0;
                                }
                            }
                        }
                        cumulative = 0;
                        for(var k = 0; k < Week_Chart.datasets[0].points.length; k++)
                        {
                            if(k < consultations.length)
                            {
                                if(data_type == 2)
                                {
                                    cumulative += consultations[k];
                                    week_consultations_data[k] = cumulative;
                                }
                                else
                                {
                                    
                                    week_consultations_data[k] = consultations[k];
                                }
                                num_consultations += consultations[k];
                            }
                            else
                            {
                                if(data_type == 2)
                                {
                                    week_consultations_data[k] = cumulative;
                                }
                                else
                                {
                                    week_consultations_data[k] = 0;
                                }
                            }
                        }
                        reload_chart(2);
                        $("#week_chart").css("display", "block");
                    }
                    else if(period == 3) // this month
                    {
                        Month_Chart.clear();
                        var cumulative = 0;
                        for(var k = 0; k < Month_Chart.datasets[1].points.length; k++)
                        {
                            if(k < users.length)
                            {
                                if(data_type == 2)
                                {
                                    cumulative += users[k];
                                    month_users_data[k] = cumulative;
                                }
                                else
                                {
                                    
                                    month_users_data[k] = users[k];
                                }
                            }
                            else
                            {
                                if(data_type == 2)
                                {
                                    month_users_data[k] = cumulative;
                                }
                                else
                                {
                                    month_users_data[k] = 0;
                                }
                            }
                        }
                        cumulative = 0;
                        for(var k = 0; k < Month_Chart.datasets[0].points.length; k++)
                        {
                            if(k < consultations.length)
                            {
                                if(data_type == 2)
                                {
                                    cumulative += consultations[k];
                                    month_consultations_data[k] = cumulative;
                                }
                                else
                                {
                                    
                                    month_consultations_data[k] = consultations[k];
                                }
                                num_consultations += consultations[k];
                            }
                            else
                            {
                                if(data_type == 2)
                                {
                                    month_consultations_data[k] = cumulative;
                                }
                                else
                                {
                                    month_consultations_data[k] = 0;
                                }
                            }
                        }
                       reload_chart(3);
                        $("#month_chart").css("display", "block");
                    }
                    else if(period == 4) // this year
                    {
                        Year_Chart.clear();
                        var cumulative = 0;
                        for(var k = 0; k < Year_Chart.datasets[1].points.length; k++)
                        {
                            if(k < users.length)
                            {
                                if(data_type == 2)
                                {
                                    cumulative += users[k];
                                    year_users_data[k] = cumulative;
                                }
                                else
                                {
                                    
                                    year_users_data[k] = users[k];
                                }
                            }
                            else
                            {
                                if(data_type == 2)
                                {
                                    year_users_data[k] = cumulative;
                                }
                                else
                                {
                                    year_users_data[k] = 0;
                                }
                            }
                        }
                        cumulative = 0;
                        for(var k = 0; k < Year_Chart.datasets[0].points.length; k++)
                        {
                            if(k < consultations.length)
                            {
                                if(data_type == 2)
                                {
                                    cumulative += consultations[k];
                                    year_consultations_data[k] = cumulative;
                                }
                                else
                                {
                                    
                                    year_consultations_data[k] = consultations[k];
                                }
                                num_consultations += consultations[k];
                            }
                            else
                            {
                                if(data_type == 2)
                                {
                                    year_consultations_data[k] = cumulative;
                                }
                                else
                                {
                                    year_consultations_data[k] = 0;
                                }
                            }
                        }
                        reload_chart(4);
                        $("#year_chart").css("display", "block");
                    }
                    $("#number_of_consultations").text(num_consultations);
                    $("#number_of_users").text(num_users);
                    
                });
            }
            
            function checkSummary(summary_value){
                if (summary_value == "Packages_Encrypted/"){
                    return "N/A";  
                } 
                summary_link='<a class="summary_link" href="' +summary_value+ '">'+'Show</a>'
                return summary_link;  
            }    
            
            function load_table(table, sort, ascending, page, scope, period, search)
            {
                var back_end_file = "";
                if(table == 1)
                {
                    back_end_file= "getCustomerData2";
                }
                else if(table == 2)
                {
                    back_end_file = "getConsultationsData";
                }
                else if(table == 3)
                {
                    back_end_file = "getDoctorsData";
                }
                var sort_order = 'asc';
                if(!ascending)
                {
                    sort_order = 'desc';
                }
                $('tr').each(function(index, element)
                {
                    if($(element).children().eq(0).is('td'))
                    {
                        $(element).remove();
                    }
                });
                $("#table_loader").css("display", "block");
                $.post(back_end_file+".php", {scope: scope, period: period, sortOrder: sort_order, sortField: sort, searchField: search, currentPage: page}, function(data, status)
                {
                    console.log(data);
                    var pre_info = JSON.parse(data);
                    var num_pages = pre_info['pages'];
                    if(page == num_pages)
                    {
                        $("#page_button_right").attr("disabled", "disabled");
                    }
                    else
                    {
                        $("#page_button_right").removeAttr("disabled");
                    }
                    if(page == 1)
                    {
                        $("#page_button_left").attr("disabled", "disabled");
                    }
                    else
                    {
                        $("#page_button_left").removeAttr("disabled");
                    }
                    if(num_pages > 0)
                    {
                        $("#page_label").text(page + " of " + num_pages);
                    }
                    else
                    {
                        $("#page_label").text("0 of 0");
                        $("#page_button_right").attr("disabled", "disabled");
                        $("#page_button_left").attr("disabled", "disabled");
                    }
                    
                    var html = '';
                    if(table == 1) // customers table
                    {
                        var info = pre_info['customers'];
                        for(var i = 0; i < info.length; i++)
                        {
                            var color = "#F5F5F5";
                            if(i % 2 == 1)
                            {
                                color = "#E9E9E9";
                            }
                            html += '<tr><td style="background-color: '+color+'; width: 225px; height: 15px; text-align: center;">';
                            html += '<a href="patientdetailMED-new.php?IdUsu='+info[i]['Identif']+'" style="color: #5EB529">'+info[i]['Name']+' '+info[i]['Surname']+'</a>';
                            html += '</td><td style="background-color: '+color+'; width: 225px; height: 15px; text-align: center;">';
                            html += info[i]['numberOfPhoneCalls'];
                            //html += '</td><td style="background-color: '+color+'; width: 150px; height: 15px; text-align: center;">';
                            //html += info[i]['video_calls'];
                            html += '</td><td style="background-color: '+color+'; width: 225px; height: 15px; text-align: center;">';
                            html += info[i]['SignUpDate'];
                            html += '</td><td style="background-color: '+color+'; width: 225px; height: 15px; text-align: center;">';
                            html += info[i]['typeOfPlan'];
                            html += '</td></tr>';
                        }
                        $("#customers_table").children('table').eq(0).append(html);
                    }
                    else if(table == 2) // consultations table
                    {
                        var info = pre_info['consultations'];
                        for(var i = 0; i < info.length; i++)
                        {
                            var color = "#F5F5F5";
                            if(i % 2 == 1)
                            {
                                color = "#E9E9E9";
                            }
                            html += '<tr><td style="background-color: '+color+'; width: 130px; height: 15px; text-align: center;">';
                            html += info[i]['doctorName'] + ' ' + info[i]['doctorSurname'];
                            html += '</td><td style="background-color: '+color+'; width: 130px; height: 15px; text-align: center;">';
                            html += '<a href="patientdetailMED-new.php?IdUsu='+info[i]['pat_id']+'" style="color: #5EB529">'+info[i]['patientName'] + ' ' + info[i]['patientSurname']+'</a>';
                            html += '</td><td style="background-color: '+color+'; width: 130px; height: 15px; text-align: center;">';
                            html += info[i]['DateTime'];
                            html += '</td><td style="background-color: '+color+'; width: 130px; height: 15px; text-align: center;">';
                            html += info[i]['Type'];
                            html += '</td><td style="background-color: '+color+'; width: 130px; height: 15px; text-align: center;">';
                            html += info[i]['Length'];
                            html += " min";
                            html += '</td><td style="background-color: '+color+'; width: 130px; height: 15px; text-align: center;">';
                            html += info[i]['Status'];
                            html += '</td><td style="background-color: '+color+'; width: 40px; height: 15px; text-align: center;">';
                            html += '<a class="notes_link" href="' + /*info[i]['Data_File']*/ 'Packages_Encrypted/eML19870117106ca6230dcfad60b62752a6f5d6a27d16.pdf' + '">Show</a>';
                            html += '</td><td style="background-color: '+color+'; width: 40px; height: 15px; text-align: center;">';

                            //html += '<a class="summary_link" href="' + info[i]['Summary_PDF']/*'Packages_Encrypted/eML1987011710482f859a63220d88fb88688ba4fb7fc3.pdf' */+ '">Show</a>';
                            html += checkSummary(info[i]['Summary_PDF']);   
                            
                            html += '</td><td style="background-color: '+color+'; width: 40px; height: 15px; text-align: center;">';
                            html += '<a class="recording_link" href="' + 'recordings/'+info[i]['Recorded_File'] /*'recordings/RE5615687f60857dc9d5362fb45e846def'*/ + '">Show</a>';
                            html += '</td></tr>';
                        }
                        $("#consultations_table").children('table').eq(0).append(html);
                        $(".recording_link").on('click', function(e)
                        {
                            e.preventDefault();
                            $.post('pdmst_dashboard_decrypt.php', {file: $(this).attr("href"), recording: true}, function(data, status)
                            {
                                console.log(data);
                                $("#recordingModal").html('<iframe src="'+/*'http://com.twilio.music.classical.s3.amazonaws.com/BusyStrings.mp3'*/data+'" style="width:400px;height:400px;"></iframe>');
                                $("#recordingModal").dialog({bigframe: true, width: 406, height: 440, modal: true});
                                $.post('pdmst_dashboard_decrypt.php', {erase: true, erase_file: data}, function(data, status){console.log(data);});
                            });
                        });
                        $("#recordingModal").on( "dialogclose", function( event, ui ) {$("#recordingModal").html("");} );
                        $(".summary_link").on('click', function(e)
                        {
                            e.preventDefault();
                            $.post('pdmst_dashboard_decrypt.php', {file: $(this).attr("href")}, function(data, status)
                            {
                                console.log(data);
                                $("#summaryModal").html('<iframe src="'+data+'" style="width:680px;height:800px;"></iframe>');
                                $("#summaryModal").dialog({bigframe: true, width: 680, height: 800, modal: true});
                                $.post('pdmst_dashboard_decrypt.php', {erase: true, erase_file: data}, function(data, status){console.log(data);});
                            });
                        });
                        $(".notes_link").on('click', function(e)
                        {
                            e.preventDefault();
                            $.post('pdmst_dashboard_decrypt.php', {file: $(this).attr("href")}, function(data, status)
                            {
                                console.log(data);
                                $("#notesModal").html('<iframe src="'+data+'" style="width:600px;height:800px;"></iframe>');
                                $("#notesModal").dialog({bigframe: true, width: 605, height: 400, modal: true});
                                $.post('pdmst_dashboard_decrypt.php', {erase: true, erase_file: data}, function(data, status){console.log(data);});

                            });
                        });
                    }
                    else if(table == 3) // doctors table
                    {
                        var info = pre_info['doctors'];
                        
                        for(var i = 0; i < info.length; i++)
                        {
                            var color = "#F5F5F5";
                            if(i % 2 == 1)
                            {
                                color = "#E9E9E9";
                            }
                            html += '<tr><td style="background-color: '+color+'; width: 225px; height: 15px; text-align: center;">';
                            html += info[i]['name'];
                            html += '</td><td style="background-color: '+color+'; width: 225px; height: 15px; text-align: center;">';
                            html += info[i]['calls'];
                            //html += '</td><td style="background-color: '+color+'; width: 150px; height: 15px;">';
                            //html += info[i]['video_calls'];
                            html += '</td><td style="background-color: '+color+'; width: 225px; height: 15px; text-align: center;">';
                            html += info[i]['numberOfConsultedPatients'];
                            //html += '</td><td style="background-color: '+color+'; width: 150px; height: 15px;">';
                            //html += info[i]['summaries'];
                            html += '</td><td style="background-color: '+color+'; width: 225px; height: 15px; text-align: center;">';
                            html += info[i]['reportsCreated'];
                            html += '</td></tr>';
                        }
                        $("#doctors_table").children('table').eq(0).append(html);
                    }
                    $("#table_loader").css("display", "none");
                    
                });
            }
            
            $("#period_select").on('change', function()
            {
                get_main_data($("#scope_select").val(), parseInt($(this).val()));
                
                current_page = 1;
                load_table(current_table, current_column, ascending, current_page, $("#scope_select").val(), parseInt($("#period_select").val()), $("#search_bar").val());
            });
            $("#scope_select").on('change', function()
            {
                get_main_data($(this).val(), parseInt($("#period_select").val()));
                current_page = 1;
                load_table(current_table, current_column, ascending, current_page, $("#scope_select").val(), parseInt($("#period_select").val()), $("#search_bar").val());
            });
            $("#search_bar_clear_button").on('click', function()
            {
                $("#search_bar").val('');
                $(this).css('visibility', 'hidden');
                current_page = 1;
                ascending = 1;
                if(current_table == 1)
                {
                    current_column = 'name';
                }
                else if(current_table == 2)
                {
                    current_column = 'doctor';
                }
                else if(current_table == 3)
                {
                    current_column = 'name';
                }
                load_table(current_table, current_column, ascending, current_page, $("#scope_select").val(), parseInt($("#period_select").val()), $("#search_bar").val());
            });
            $("#search_bar_button").on('click', function()
            {
                current_page = 1;
                ascending = 1;
                if(current_table == 1)
                {
                    current_column = 'name';
                }
                else if(current_table == 2)
                {
                    current_column = 'doctor';
                }
                else if(current_table == 3)
                {
                    current_column = 'name';
                }
                load_table(current_table, current_column, ascending, current_page, $("#scope_select").val(), parseInt($("#period_select").val()), $("#search_bar").val());
            });
            $("#search_bar").on('input', function()
            {
                if($(this).val().length > 0)
                {
                    $("#search_bar_clear_button").css("visibility", "visible");
                }
                else
                {
                    $("#search_bar_clear_button").css("visibility", "hidden");
                }
            });
            $("button[id^='segment_']").on('click', function()
            {
                // To select the type of table (customers, consultations, or doctors)
                if(!$(this).hasClass("segmented_control_selected"))
                {
                    var selected = parseInt($(this).attr('id').split('_')[1]);
                    $("button[id^='segment_']").addClass("segmented_control");
                    $("button[id^='segment_']").removeClass("segmented_control_selected");
                    $(this).addClass("segmented_control_selected");
                    $("#customers_table").css("display", "none");
                    $("#consultations_table").css("display", "none");
                    $("#doctors_table").css("display", "none");
                    if(selected == 1)
                    {
                        // load customers
                        current_table = 1;
                        $("#customers_table").css("display", "block");
                        $('#caret_button_customers_name').parent().parent().children().each(function(index)
                        {
                            $(this).css('background-color', '#22AEFF');
                        });
                        $('#caret_button_customers_name').parent().css('background-color', '#6ECCFF');
                        current_column = 'name';
                    }
                    else if(selected == 2)
                    {
                        // load consultations
                        current_table = 2;
                        $("#consultations_table").css("display", "block");
                        $('#caret_button_consultations_doctor').parent().parent().children().each(function(index)
                        {
                            $(this).css('background-color', '#22AEFF');
                        });
                        $('#caret_button_consultations_doctor').parent().css('background-color', '#6ECCFF');
                        current_column = 'doctor';
                    }
                    else if(selected == 3)
                    {
                        // load doctors
                        current_table = 3;
                        $("#doctors_table").css("display", "block");
                        $('#caret_button_doctors_name').parent().parent().children().each(function(index)
                        {
                            $(this).css('background-color', '#22AEFF');
                        });
                        $('#caret_button_doctors_name').parent().css('background-color', '#6ECCFF');
                        current_column = 'name';
                    }
                    current_page = 1;
                    ascending = 1;
                    load_table(current_table, current_column, ascending, 1, $("#scope_select").val(), parseInt($("#period_select").val()), $("#search_bar").val());
                        
                }
            });
            $("button[id^='toggle_']").on('click', function()
            {
                // To select whether the charts are regular or cumulative
                if(!$(this).hasClass("segmented_control_selected"))
                {
                    data_type = parseInt($(this).attr('id').split('_')[1]);
                    get_main_data($("#scope_select").val(), parseInt($("#period_select").val()));
                    $("button[id^='toggle_']").addClass("segmented_control");
                    $("button[id^='toggle_']").removeClass("segmented_control_selected");
                    $(this).addClass("segmented_control_selected");
                }
            });
            $('button[id^="caret_button_"]').on('click', function()
            {
                // for choosing the column to sort the table by
                var button_data = $(this).attr("id").split("_");
                console.log(button_data[2] + ":" + button_data[3]);
                current_column = button_data[3];
                if($(this).hasClass("icon-caret-down"))
                {
                    $(this).removeClass("icon-caret-down").addClass("icon-caret-up");
                    ascending = false;
                }
                else
                {
                    $(this).removeClass("icon-caret-up").addClass("icon-caret-down");
                    ascending = true;
                }
                load_table(current_table, current_column, ascending, 1, $("#scope_select").val(), parseInt($("#period_select").val()), $("#search_bar").val());
                current_page = 1;
                
                $(this).parent().parent().children().each(function(index)
                {
                    $(this).css("background-color", "#22AEFF");
                });
                $(this).parent().css("background-color", "#6ECCFF");
            });
            $('button[class^="consultations_button"]').on('click', function()
            {
                if($(this).hasClass("consultations_button_selected"))
                {
                    $(this).removeClass("consultations_button_selected").addClass("consultations_button");
                    show_consultations = false;
                }
                else if($(this).hasClass("consultations_button"))
                {
                    $(this).removeClass("consultations_button").addClass("consultations_button_selected");
                    show_consultations = true;
                }
                reload_chart(parseInt($("#period_select").val()));
            });
            $('button[class^="users_button"]').on('click', function()
            {
                if($(this).hasClass("users_button_selected"))
                {
                    $(this).removeClass("users_button_selected").addClass("users_button");
                    show_users = false;
                }
                else if($(this).hasClass("users_button"))
                {
                    $(this).removeClass("users_button").addClass("users_button_selected");
                    show_users = true;
                }
                reload_chart(parseInt($("#period_select").val()));
            });
                                                          
            $("#page_button_left").on('click', function()
            {
                current_page -= 1;
                load_table(current_table, current_column, ascending, current_page, $("#scope_select").val(), parseInt($("#period_select").val()), $("#search_bar").val());
                
            });
            $("#page_button_right").on('click', function()
            {
                current_page += 1;
                load_table(current_table, current_column, ascending, current_page, $("#scope_select").val(), parseInt($("#period_select").val()), $("#search_bar").val());
            });
            get_main_data("Global", 1); 
            load_table(current_table, current_column, ascending, current_page, $("#scope_select").val(), parseInt($("#period_select").val()), $("#search_bar").val());
            
            
        });
    </script>
  </body>
</html>