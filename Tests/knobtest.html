<html style="background: #F9F9F9;"><head>
    <meta charset="utf-8">
    <title lang="en">Health2Me- Device API Link Console</title>
    <link rel="icon" type="image/ico" href="favicon.ico"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="css/style.css" rel="stylesheet">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link rel="stylesheet" href="css/jquery-ui-1.8.16.custom.css" media="screen"  />
    <link rel="stylesheet" href="css/fullcalendar.css" media="screen"  />
    <link rel="stylesheet" href="css/chosen.css" media="screen"  />
    <link rel="stylesheet" href="css/datepicker.css" >
    <link rel="stylesheet" href="css/colorpicker.css">
    <link rel="stylesheet" href="css/glisse.css?1.css">
    <link rel="stylesheet" href="css/jquery.jgrowl.css">
    <link rel="stylesheet" href="js/elfinder/css/elfinder.css" media="screen" />
    <link rel="stylesheet" href="css/jquery.tagsinput.css" />
    <link rel="stylesheet" href="css/demo_table.css" >
    <link rel="stylesheet" href="css/jquery.jscrollpane.css" >
    <link rel="stylesheet" href="css/validationEngine.jquery.css">
    <link rel="stylesheet" href="css/jquery.stepy.css" />
    <link rel="stylesheet" type="text/css" href="css/googleAPIFamilyCabin.css">
    <script type="text/javascript" src="js/42b6r0yr5470"></script>
	
    <!--<link rel="stylesheet" href="css/icon/font-awesome.css">-->    
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    
    <link rel="stylesheet" href="css/bootstrap-responsive.css">
	<link rel="stylesheet" href="css/toggle-switch.css">
    <link rel="stylesheet" href="css/doctor_styles.css">
    <link rel="stylesheet" href="build/css/intlTelInput.css">
	
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lte IE 8]><script type="text/javascript" src="/js/excanvas.min.js"></script><![endif]-->
 
    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="/images/icons/favicon.ico">
	
    
	<!-- Create language switcher instance and set default language to en-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>
    <script src="jquery-lang-js-master/js/jquery-cookie.js" charset="utf-8" type="text/javascript"></script>    
    <script src="jquery-lang-js-master/js/jquery-lang.js" charset="utf-8" type="text/javascript"></script>
    
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="build/js/intlTelInput.js"></script>
    <script src="js/isValidNumber.js"></script>	
    <script src="js/jquery.cookie.js"></script>
    
    
    <script type="text/javascript">
	var lang = new Lang('en');
	window.lang.dynamic('th', 'jquery-lang-js-master/js/langpack/th.json');


function delete_cookie( name ) {
  document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:01 GMT;';
}

function setCookie(name,value,days) {
confirm('Would you like to switch languages?');
delete_cookie('lang');
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
	
	pageRefresh(); 
}

function setCookie2(name,value,days) {
//confirm('Would you like to switch languages?');
delete_cookie('lang');
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
	
	 
}

function pageRefresh(){
location.reload();
}

//alert($.cookie('lang'));

var langType = $.cookie('lang');

if(langType == 'th'){
var language = 'th';
}else{
var language = 'en';
}

if(langType == 'th'){
setTimeout(function(){
window.lang.change('th');
lang.change('th');
//alert('th');
}, 2000);
}else if(langType == 'en'){
setTimeout(function(){
window.lang.change('en');
lang.change('en');
//alert('th');
}, 2000);
} else {
setCookie('lang', 'en', 30);
}
</script>
	
</head>
  
<body style="background: #F9F9F9;">

   
    <div id="container_fitness" style="margin-left:100px; margin-top:30px; border:1px solid #cacaca; width:150px; height:150px; position:relative;"></div>
    <div id="container_smoke" style="margin-left:100px; margin-top:30px; border:1px solid #cacaca; width:100px; height:100px; position:relative;"></div>
    <div id="container_sleep" style="margin-left:100px; margin-top:30px;  width:70px; height:70px; position:relative;"></div>
    <div id="container_drinking" style="margin-left:100px; margin-top:30px; width:50px; height:50px; position:relative;"></div>

    <script src="js/jquery.fittext.js"></script>
    
    <script>

drawKnob($('#container_fitness'),'#22aeff', 18, 11, 'Fitness','fitness_svg',0,1);   
drawKnob($('#container_smoke'),'#54bc00',  10, 2, 'Tobacco','smoking_svg',0,1);   
drawKnob($('#container_sleep'),'#22aeff',  8, 6, 'Sleep','sleeping_svg',0,1);   
drawKnob($('#container_drinking'),'#54bc00',  29, 12, 'Alcohol','drinking_svg',0,0);   
        
function drawKnob(component, gauge_color, max_data, value_data,label_data,icon_name, use_fa, show_label){
      
      if (use_fa == 1)  {   
            component.append( "<p id='GraphIcon"+component.attr('id')+"' style='width: 100%; position: absolute; top: 25%; font-family: Lato; font-size: 20px; color: rgba(34, 174, 255, 0.53); text-align:center;'><i class='fa fa-signal fa-2x'></i></p>" );}
        else{
            var size_icon = component.height() / 3.5;
            component.append( "<p id='GraphIcon"+component.attr('id')+"' style='width: 100%; position: absolute; top: 20%; font-family: Lato; font-size: 20px; color: rgba(34, 174, 255, 0.53); text-align:center;'><img src='images/icons/"+icon_name+".png' style='width: "+size_icon+"px; '/></p>" );}
      if (show_label == 1) 
      {
          component.append( "<p id='GraphData"+component.attr('id')+"' style='width: 100%; position: absolute; top: 45%; font-family: Lato; font-size: 38px; color: #9b9b9b; text-align:center;'>"+value_data+"</p>" );
          component.append( "<p id='GraphLabel"+component.attr('id')+"' style='width: 100%; position: absolute; top: 60%; font-family: Lato; font-size: 18px; color: #bbbbbb; text-align:center;'>"+label_data+"</p>" );
      }else{
          component.append( "<p id='GraphData"+component.attr('id')+"' style='width: 100%; position: absolute; top: 40%; font-family: Lato; font-size: 45px; color: #9b9b9b; text-align:center;'>"+value_data+"</p>" );
      }
      component.append( "<canvas id='myCanvas"+component.attr('id')+"'></canvas>" );
    
      jQuery('#GraphIcon'+component.attr('id')).fitText();
      if (show_label == 1) 
      {
        jQuery('#GraphData'+component.attr('id')).fitText(0.6);
        jQuery('#GraphLabel'+component.attr('id')).fitText(1.0);
      }else{
        jQuery('#GraphData'+component.attr('id')).fitText(0.5);
       } 
      var maxGraph = max_data;
      var actualValue = value_data;    
        
      var canvas = document.getElementById('myCanvas'+component.attr('id'));
      fitToContainer(canvas);
      var context = canvas.getContext('2d');
      var x = canvas.width / 2;
      var y = canvas.height / 2;
      var radius = x - (0.25 * x);
      var startAngle = 0.6 * Math.PI;
      var endAngle = 2.40 * Math.PI;
     
      var gap = Math.PI / 6;    
      var totalArc = (2 * Math.PI) - (2 * gap);
      var startAngle = ((1/2) * Math.PI)+gap;
      var endAngle = ((5/2) * Math.PI)-gap;
      var counterClockwise = false;

      context.beginPath();
      context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
      context.lineWidth = (x/10) + 2;
      context.lineCap = 'round';

      // line color
      context.strokeStyle = '#d3d3d3';
      context.stroke();

      context.beginPath();
      context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
      context.lineWidth = (x/10);
      context.lineCap = 'round';

      // line color
      context.strokeStyle = '#ececec';
      context.stroke();
    
       
        
      endAngle = 0.80 * Math.PI;
      endAngle = ((1/2) * Math.PI)+ gap + (actualValue * totalArc / maxGraph);
        
      context.beginPath();
      context.arc(x, y, radius, startAngle, endAngle, counterClockwise);
      context.lineWidth = (x/10) + 2;
      context.lineCap = 'round';

      // line color
      context.strokeStyle = gauge_color;
      context.stroke();
}
            
function fitToContainer(canvas){
      canvas.style.width ='100%';
      canvas.style.height='100%';
      canvas.width  = canvas.offsetWidth;
      canvas.height = canvas.offsetHeight;
}
        
     </script>

    
</body>

<script type="text/javascript" >    
 var ConnData;  
 var icdarray;  
    
$(document).ready(function() {
       
  $('#ICDBox').live('click',function()	{          
		   $("#modalICDSearch").dialog({bgiframe: true, width: 400, height: 400, modal: true,title:"ICD10 LookUp"});
       });
 
  $('#ButtonSearchICD').live('click',function(){
		
        var tosearch = $('#ICDLABox').val();
		var Codes = GetICD10Code(tosearch);
		var longit = Object.keys(Codes).length;	   	  
		var n=0;
           
           
		$('#ICDList').empty();
		while (n < longit)
		{
			$('#ICDList').append($('<option>', {
				value: Codes[n].ICD10Code,
				text: Codes[n].disName
			}));
			
			n++;
		}
        
    });
        
  $('#ICDList').live('change', 'select', function() {
	    console.log($(this).val()); // the selected optionsâ€™s value
	
		$('#SelCode').html($(this).val());
	    // if you want to do stuff based on the OPTION element:
	    //var opt = $(this).find('option:selected')[0];
		var opt = $("#ICDList option:selected").text();
		$('#SelOption').html(opt);
	    // use switch or if/else etc.
	});
	
  $('#ButtonUpdateICDCode').live('click',function()	{
		var Wvalue = $('#SelCode').html();
		var Woption = $('#SelOption').html();
		$('#ICDBox').val(Wvalue);
		$('#DiagnosticBox').val(Woption);
		$('#modalICDSearch').dialog('close');
	});
	

});

    
    function GetICD10Code(searchW)
	{		
		var ICDCodes = '';	
		var ICDArr = Array();	
        var queUrl = 'xmlread.php?search_string='+searchW;
        $.ajax({
            url: queUrl,
            dataType: "json",
            async: false,
            success: function(data)
            {
                ConnData = data.items; 
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) { 
            alert("Status: " + textStatus); alert("Error: " + errorThrown); 
            }       
         });
         return ConnData;
    }

</script>


    
    
</html>